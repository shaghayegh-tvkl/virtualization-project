
- name: Include Sheepdog Variables
  include_vars: ./vars/sheepdog.yml

- name: Install Compile-time Dependencies
  apt:
    name: [automake,autoconf,pkg-config,build-essential,liburcu-dev,libtool,libcorosync-common-dev,libcpg-dev,libcfg-dev,yasm,libzookeeper-mt-dev]
    state: latest
    update_cache: yes


- name: Download Sources
  get_url: url={{ sheepdog.url }} dest={{ sheepdog.project_dir }}/{{ sheepdog.file }}

# - name: Unzip Sources
#   shell: tar xvzf {{ sheepdog.project_dir }}/{{ sheepdog.file }}

- name: Extract foo.tgz into /var/lib/foo
  ansible.builtin.unarchive:
    src: /home/ununtu/{{ sheepdog.file }}
    dest: /home/ununtu/sheepdog
    remote_src: yes

- name: Run ./autogen Script
  shell: /home/ununtu/{{ sheepdog.file }}/autogen


- name: Run ./configure Script
  shell: /home/ununtu/{{ sheepdog.file }}/configure --enable-zookeeper

- name: Make Sheepdog
  command: chdir=/home/ununtu/{{ sheepdog.file }} make install
